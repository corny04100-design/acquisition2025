<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>2025ë…„ ì·¨ë“ì„¸ ê³„ì‚°(ìƒê°€ ë“± ìœ ìƒì·¨ë“)</title>
<meta name="theme-color" content="#2c58ff" />
<link rel="manifest" href="manifest.webmanifest?v=20250916">
<link rel="icon" href="./icon-192-v5.png" sizes="192x192" />
<link rel="apple-touch-icon" href="./icon-512-v5.png" />

<style>
:root{
  --bg:#f9fafb; --card:#ffffff; --text:#111827; --text-sub:#6b7280;
  --brand:#2563eb; --brand-weak:#eff6ff; --sum-bg:#f3f4f6;
  --input-bg:#fefce8; --line:#e5e7eb; --shadow:rgba(0,0,0,.06);
  --warn:#dc2626; --muted:#9ca3af;
}

/* Base */
html,body{margin:0;padding:0;height:100%;
  background:var(--bg);color:var(--text);
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  line-height:1.65;font-size:15px;}
/* Background pattern */
body::before{content:"";position:fixed;inset:0;pointer-events:none;z-index:-1;
  background:radial-gradient(rgba(44,88,255,.06) 1px,transparent 1px);
  background-size:18px 18px;opacity:.16}

/* AppBar */
header.appbar{position:sticky;top:0;z-index:50;background:var(--card);
  backdrop-filter:blur(8px);border-bottom:1px solid var(--line);
  box-shadow:0 1px 3px var(--shadow)}
header .row{max-width:960px;margin:0 auto;padding:10px 16px;
  display:flex;align-items:center;gap:12px}
.brand{display:flex;align-items:center;gap:8px;font-weight:800;font-size:1rem}
.brand .logo{font-size:18px}
.app-actions{display:flex;gap:8px;margin-left:auto}

/* Icon-only buttons */
.icon-btn{padding:6px 12px;border:1px solid var(--line);border-radius:8px;
  background:var(--brand-weak);font-size:.8rem;font-weight:700;color:var(--text);
  text-decoration:none;transition:background .15s}
.icon-btn:hover{background:#dbeafe}
.icon-btn.icon-only{width:38px;height:38px;padding:0;display:inline-flex;
  align-items:center;justify-content:center}
.icon-btn.icon-only svg{width:20px;height:20px}
.icon-stroke{fill:none;stroke:#1f2937;stroke-width:2;stroke-linecap:round;stroke-linejoin:round}

/* Layout */
.wrap{max-width:960px;margin:20px auto 80px;padding:0 16px}
.title{font-size:1.3rem;font-weight:900;margin-bottom:10px;text-align:center}
.grid{display:grid;grid-template-columns:50% 50%;gap:20px} /* ì¢Œ/ìš° 50% ê³ ì • */
.card{background:var(--card);border:1px solid var(--line);border-radius:14px;
  padding:24px;box-shadow:0 4px 12px var(--shadow)}

/* Section header */
.header-row{display:flex;align-items:center;justify-content:space-between;margin-bottom:14px}
.header-row h2{font-size:1.05rem;margin:0;font-weight:900;text-align:center;width:100%}
.header-row .unit{font-size:.75rem;color:var(--text-sub)}

/* Inputs */
label{font-size:.9rem;color:var(--text-sub);margin-bottom:4px;display:block;text-align:center}
input.num{width:50%; /* ì…ë ¥ë°•ìŠ¤ 50% */
  padding:12px;border:1px solid #d1d5db;border-radius:10px;background:var(--input-bg);
  text-align:right;font-size:1rem;display:block;margin:0 auto}
input.num:focus{outline:none;border-color:#9db4ff;box-shadow:0 0 0 3px rgba(37,99,235,.15)}

/* Action */
.actions{display:flex;justify-content:space-between;align-items:center;margin-top:12px}
.btn{display:inline-flex;align-items:center;gap:6px;padding:10px 18px;border-radius:10px;
  background:var(--brand);color:#fff;font-weight:800;cursor:pointer;transition:filter .15s}
.btn:hover{filter:brightness(1.05)}

/* Info table (ì„¸ìœ¨ ë° ê³¼ì„¸í‘œì¤€) */
.center-30{width:60%;min-width:420px;max-width:680px;margin:16px auto 0} /* ê°€ìš´ë° í­ ì™„í™” */
.table{width:100%;border-collapse:collapse;margin-top:10px;font-size:.9rem}
.table th,.table td{padding:10px;border-bottom:1px solid var(--line)}
.table th{text-align:center;background:var(--bg)}
.table td{text-align:right}
.table td:first-child{text-align:center} /* í•œê¸€ í•­ëª© ì¤‘ì•™ */
.nowrap td,.nowrap th{white-space:nowrap}

/* Results table */
tfoot tr{background:var(--sum-bg);font-weight:700}
.table tfoot th:nth-child(2), .table tfoot th:nth-child(3){text-align:right} /* 4.6% & ê¸ˆì•¡ ìš°ì¸¡ ì •ë ¬ */

/* Sum box */
.sum-box{background:var(--brand-weak);border:1px solid #bfdbfe;border-radius:12px;
  padding:16px;margin:12px 0;display:grid;grid-template-columns:1fr 1fr;gap:10px;
  text-align:center;font-weight:800}
.sum-box .label{font-size:.78rem;color:#374151;text-align:center}
.sum-box .value{font-size:1.125rem;text-align:center}
.sum-box .value note{font-size:.75rem} /* (typo fix in JS sets class 'note') */
.nowrap{white-space:nowrap}

/* Messages */
.warn{color:var(--warn);font-size:.85rem;margin-top:10px;text-align:center}

/* Print: í•œ í˜ì´ì§€ì— ë“¤ì–´ì˜¤ë„ë¡ ì••ì¶• */
@media print{
  @page{size:A4 portrait;margin:10mm}
  body{font-size:11pt}
  .wrap{max-width:100%;margin:0;padding:0}
  .grid{grid-template-columns:1fr 1fr;gap:8px}
  .card{padding:10px;box-shadow:none;border-color:#e5e7eb}
  .sum-box{margin:6px 0;padding:10px}
  .table{font-size:10pt}
  .table th,.table td{padding:6px}
  .title{margin:4px 0 8px 0;font-size:16pt}
  header.appbar,.app-actions{display:none !important}
}
</style>
</head>
<body>
<header class="appbar">
  <div class="row">
    <div class="brand"><span class="logo">ğŸ›ï¸</span><span>2025ë…„ ì·¨ë“ì„¸ ê³„ì‚°(ìƒê°€ ë“± ìœ ìƒì·¨ë“)</span></div>
    <div class="app-actions">
      <!-- ì•„ì´ì½˜ ë²„íŠ¼ 2ê°œ: í”„ë¦°í„° / í”Œë¡œí”¼ (ë‘˜ ë‹¤ ì¸ì‡„ ë¯¸ë¦¬ë³´ê¸°) -->
      <a class="icon-btn icon-only" href="javascript:void(0)" onclick="openPrint()" title="ì¸ì‡„ ë¯¸ë¦¬ë³´ê¸°" aria-label="ì¸ì‡„">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path class="icon-stroke" d="M7 8V4h10v4M6 17H5a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2h-1M7 14h10v6H7zM17 11h.01"/></svg>
      </a>
      <a class="icon-btn icon-only" href="javascript:void(0)" onclick="openPrint()" title="PDFë¡œ ì €ì¥" aria-label="PDF ì €ì¥">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <rect x="3" y="3" width="18" height="18" rx="2" class="icon-stroke"/>
          <rect x="6" y="5.5" width="9" height="6" class="icon-stroke"/>
          <rect x="17" y="6.5" width="3" height="3" fill="#1f2937"/>
          <line x1="6" y1="16.5" x2="18" y2="16.5" class="icon-stroke"/>
        </svg>
      </a>
      <a class="icon-btn" target="_blank" href="https://www.law.go.kr/LSW/lsSc.do?query=%EC%A7%80%EB%B0%A9%EC%84%B8%EB%B2%95" rel="noopener">ğŸ” ì§€ë°©ì„¸ë²•</a>
      <a class="icon-btn" target="_blank" href="https://www.wetax.go.kr/etq/etp/epi/E070101M01.do" rel="noopener">ğŸ§¾ ìœ„íƒìŠ¤</a>
    </div>
  </div>
</header>

<div class="wrap">
  <div class="title">2025ë…„ ì·¨ë“ì„¸ ê³„ì‚°(ìƒê°€ ë“± ìœ ìƒì·¨ë“)</div>

  <div class="grid">
    <!-- ì…ë ¥ -->
    <div class="card" id="section-input">
      <div class="header-row">
        <h2>1. ì·¨ë“ ì •ë³´ ì…ë ¥ <span class="unit">(ë‹¨ìœ„: ì›)</span></h2>
      </div>

      <label for="ì·¨ë“ê°€ì•¡">ì·¨ë“ê°€ì•¡(ë§¤ë§¤ê°€)</label>
      <input id="ì·¨ë“ê°€ì•¡" class="num" type="text" inputmode="numeric" placeholder="ì˜ˆ) 350,000,000" />

      <div class="actions">
        <button class="btn" onclick="calc()">âœï¸ ê³„ì‚°í•˜ê¸°</button>
        <span style="font-size:.8rem;color:var(--muted);text-align:center;flex:1"></span>
      </div>

      <details class="center-30" open>
        <summary style="text-align:center">ì„¸ìœ¨ ë° ê³¼ì„¸í‘œì¤€</summary>
        <table class="table nowrap">
          <tbody>
            <tr><td>ê³¼ì„¸í‘œì¤€</td><td id="ê³¼í‘œ">-</td></tr>
            <tr><td>ì·¨ë“ì„¸</td><td>4%</td></tr>
            <tr><td>ë†ì–´ì´ŒíŠ¹ë³„ì„¸</td><td>0.2%</td></tr>
            <tr><td>ì§€ë°©êµìœ¡ì„¸</td><td>0.4%</td></tr>
            <tr><td>í•©ê³„ ì„¸ìœ¨</td><td>4.6%</td></tr>
          </tbody>
        </table>
      </details>
    </div>

    <!-- ê²°ê³¼ -->
    <div class="card" id="section-result">
      <h2 class="header-row" style="justify-content:center">2. ì‚°ì¶œ ì„¸ì•¡</h2>

      <div class="sum-box" role="status" aria-live="polite">
        <div>
          <div class="label">ì´ í•©ê³„ ì„¸ì•¡</div>
          <div class="value" id="sum_total">-</div>
        </div>
        <div>
          <div class="label">ë‚©ë¶€ ì•ˆë‚´</div>
          <div class="value note nowrap" id="sum_guide">ì·¨ë“(ì”ê¸ˆì§€ê¸‰ì¼)ì¼ë¡œë¶€í„° 60ì¼ ë‚´</div>
        </div>
      </div>

      <table class="table">
        <thead><tr><th>ì„¸ëª©</th><th>ì„¸ìœ¨</th><th>ì„¸ì•¡</th></tr></thead>
        <tbody id="tb">
          <tr><td colspan="3" style="text-align:center;color:#6b7280">ì…ë ¥ í›„ â€˜ê³„ì‚°í•˜ê¸°â€™ë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”.</td></tr>
        </tbody>
        <tfoot>
          <tr><th>í•©ê³„ ì„¸ì•¡</th><th>4.6%</th><th id="sumY">-</th></tr>
        </tfoot>
      </table>

      <div class="warn">â€» ì‹¤ì œ ê³ ì§€ì„œëŠ” ê°ë©´Â·ì¤‘ê³¼, ì ˆì‚¬ ë°©ì‹ ë“±ìœ¼ë¡œ ì°¨ì´ê°€ ìˆì„ ìˆ˜ ìˆìœ¼ë‹ˆ ìµœì¢… ê³ ì§€ì„œë¥¼ í™•ì¸í•˜ì„¸ìš”.</div>
    </div>
  </div>
</div>

<script>
/* Helpers */
const $=id=>document.getElementById(id);
const setText=(id,v)=>{const el=$(id); if(el) el.textContent=v;}
const setHTML=(id,v)=>{const el=$(id); if(el) el.innerHTML=v;}
const numOf=id=>Number((($(id)?.value)||'').replace(/,/g,'')||0);
const floor10=n=>Math.floor(n/10)*10;
const fmt=n=> (Number.isFinite(n)?Math.floor(n).toLocaleString('ko-KR')+'ì›':'-');

/* Rates */
const ACQ_RATE=0.04, NTS_RATE=0.002, EDU_RATE=0.004;

/* Auto comma (ë¬¸êµ¬ ì—†ì´ ë™ì‘) */
document.addEventListener('input',e=>{
  if(e.target.classList.contains('num')){
    let v=e.target.value.replace(/,/g,'').replace(/[^\d]/g,'');
    if(v===''){e.target.value='';return;}
    e.target.value=v.replace(/\B(?=(\d{3})+(?!\d))/g, ",");
  }
});

/* Calc */
function calc(){
  const base=numOf('ì·¨ë“ê°€ì•¡')||0;

  const acq=floor10(base*ACQ_RATE);
  const nts=floor10(base*NTS_RATE);
  const edu=floor10(base*EDU_RATE);
  const sum=acq+nts+edu;

  const rows=[
    ['ì·¨ë“ì„¸','4%',fmt(acq)],
    ['ë†ì–´ì´ŒíŠ¹ë³„ì„¸','0.2%',fmt(nts)],
    ['ì§€ë°©êµìœ¡ì„¸','0.4%',fmt(edu)]
  ].map(([n,r,a])=>`<tr><td>${n}</td><td>${r}</td><td>${a}</td></tr>`).join('');
  setHTML('tb',rows);

  setText('sumY',fmt(sum));
  setText('sum_total',fmt(sum));
  setText('ê³¼í‘œ',fmt(base));
  setText('sum_guide','ì·¨ë“(ì”ê¸ˆì§€ê¸‰ì¼)ì¼ë¡œë¶€í„° 60ì¼ ë‚´');
}

/* Print (ë¯¸ë¦¬ë³´ê¸° 1í˜ì´ì§€ êµ¬ì„±) */
function openPrint(){
  try{ calc(); setTimeout(()=>window.print(),0); }
  catch(e){ window.print(); }
}
</script>

<script>
// Service Worker registration
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('./service-worker.js').then((reg) => {
      if (reg.waiting) reg.waiting.postMessage('SKIP_WAITING');
      reg.addEventListener('updatefound', () => {
        const sw = reg.installing;
        if (!sw) return;
        sw.addEventListener('statechange', () => {
          if (sw.state === 'installed' && navigator.serviceWorker.controller) {
            sw.postMessage('SKIP_WAITING');
          }
        });
      });
      let refreshing = false;
      navigator.serviceWorker.addEventListener('controllerchange', () => {
        if (refreshing) return;
        refreshing = true;
        window.location.reload();
      });
    }).catch(console.error);
  });
}
</script>
</body>
</html>

