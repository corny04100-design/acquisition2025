<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ì·¨ë“ì„¸ ê³„ì‚° Â· ë©”ë‰´</title>
<meta name="theme-color" content="#2c58ff" />
<link rel="manifest" href="manifest.webmanifest?v=20250916">
<link rel="icon" href="./icon-192-v5.png" sizes="192x192" />
<link rel="apple-touch-icon" href="./icon-512-v5.png" />
<style>
:root{ --bg:#f9fafb; --card:#ffffff; --text:#111827; --text-sub:#6b7280; --brand:#2563eb; --brand-weak:#eff6ff; --sum-bg:#f3f4f6; --input-bg:#fefce8; --line:#e5e7eb; --shadow:rgba(0,0,0,.06); --warn:#dc2626; --muted:#9ca3af; --sky:#e0f2fe; --yellow:#fef9c3; }
html,body{margin:0;padding:0;height:100%;background:var(--bg);font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:var(--text);line-height:1.6}
.hidden{display:none !important}

/* ê³µí†µ í—¤ë” */
header.appbar{position:sticky;top:0;z-index:50;background:var(--card);backdrop-filter:blur(8px);border-bottom:1px solid var(--line);box-shadow:0 1px 3px var(--shadow)}
header .row{max-width:960px;margin:0 auto;padding:9px 16px;display:flex;align-items:center;gap:7px;flex-wrap:nowrap}
.brand{display:flex;align-items:center;gap:7px;font-weight:700;font-size:0.95rem;white-space:nowrap}
.brand .logo{display:none}
.app-actions{display:flex;gap:5px;margin-left:auto;flex-wrap:nowrap}
.icon-btn{padding:5px 9px;border:1px solid var(--line);border-radius:8px;background:var(--brand-weak);font-size:0.78rem;font-weight:700;color:var(--text);text-decoration:none;transition:background .15s;white-space:nowrap}
.icon-btn:hover{background:#dbeafe}
.icon-btn.icon-only{width:36px;height:36px;padding:0;display:inline-flex;align-items:center;justify-content:center}
.icon-btn.icon-only svg{width:19px;height:19px}
.icon-stroke{fill:none;stroke:#1f2937;stroke-width:2;stroke-linecap:round;stroke-linejoin:round}
.installed .btn-install{display:none !important}

/* ê³µí†µ ë ˆì´ì•„ì›ƒ */
.wrap{max-width:960px;margin:18px auto 70px;padding:0 16px}
.title{font-size:1.25rem;font-weight:800;margin-bottom:9px;text-align:center}
.card{background:var(--card);border:1px solid var(--line);border-radius:14px;padding:22px;box-shadow:0 4px 12px var(--shadow);margin-bottom:14px}
.btn{display:inline-flex;align-items:center;gap:6px;padding:9px 16px;border-radius:10px;background:var(--brand);color:#fff;font-weight:700;cursor:pointer;transition:filter .15s}
.btn:hover{filter:brightness(1.05)}

/* ë©”ë‰´ */
#view-menu .menu-wrap{max-width:640px;margin:0 auto}
.menu-grid{display:grid;grid-template-columns:1fr;gap:13px}
.menu-item{display:flex;align-items:center;gap:13px;padding:16px;border:1px solid var(--line);border-radius:14px;background:var(--card);box-shadow:0 4px 12px var(--shadow);cursor:pointer;text-decoration:none;color:inherit}
.menu-item:hover{background:#f8fafc}
.menu-item.ready{background:#fef2f2;border-color:#fecaca}
.menu-item.ready .menu-num{background:#fee2e2}
.menu-item.ready:hover{background:#fee2e2}
.menu-item.sky{background:#e0f2fe !important;border-color:#bae6fd !important}
.menu-item.sky:hover{background:#dbeafe !important}
.menu-num{min-width:34px;height:34px;border-radius:10px;display:flex;align-items:center;justify-content:center;background:var(--brand-weak);font-weight:800}
.menu-text{font-size:1rem;font-weight:700}
.menu-note{font-size:.83rem;color:var(--text-sub)}

/* í‘œ/ì…ë ¥ */
.grid{display:grid;grid-template-columns:50% 50%;gap:18px}
#view-calc2 .grid,#view-calc3 .grid{grid-template-columns:1fr !important}
.header-row{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
h2{font-size:1.03rem;margin:0}
h2 .unit{font-size:0.73rem;color:var(--text-sub)}
label{font-size:0.88rem;color:var(--text-sub);margin-bottom:3px;display:block}
input.num{width:70%;display:block;margin:0 auto;padding:11px;border:1px solid #d1d5db;border-radius:10px;background:var(--input-bg);text-align:right;font-size:1rem}
.table{width:100%;border-collapse:collapse;margin-top:8px;font-size:0.88rem}
.table th,.table td{padding:9px;border-bottom:1px solid var(--line)}
.table th{text-align:center;background:var(--bg)}
.table td{text-align:right}
.table td:first-child{text-align:center}
tfoot tr{background:var(--sum-bg);font-weight:700}
.sum-box{background:var(--brand-weak);border:1px solid #bfdbfe;border-radius:12px;padding:14px;margin:10px 0;display:grid;grid-template-columns:1fr 1fr;gap:9px;text-align:center;font-weight:700}
.warn{color:var(--warn);font-size:0.83rem;margin-top:8px;text-align:right}
.sum-box .label{font-size:0.76rem;color:#374151}
.sum-box .value{font-size:1.08rem}
.sum-box .value.note{font-size:0.73rem}
.center-30{width:60%;min-width:420px;max-width:680px;margin:14px auto 0 auto}

/* ì¸ì‡„ ìµœì í™” */
@media print{
  @page{size:A4 portrait;margin:10mm}
  body{font-size:11pt}
  .wrap{max-width:100%;margin:0;padding:0}
  .grid{grid-template-columns:1fr 1fr;gap:7px}
  .card{padding:9px;box-shadow:none;border-color:#e5e7eb;margin-bottom:10px}
  .sum-box{margin:5px 0;padding:9px}
  .table{font-size:10pt}
  .table th,.table td{padding:5px}
  .title{margin:4px 0 8px 0;font-size:16pt}
}
#view-calc2 .input-grid,#view-calc3 .input-grid{display:grid;grid-template-columns:7fr 3fr;gap:10px;align-items:end;margin-bottom:10px}
#view-calc2 .input-grid input.num,#view-calc3 .input-grid input.num{width:70%}
#view-calc2 input.date,#view-calc3 input.date{display:block;margin:0 auto;padding:11px;border:1px solid #d1d5db;border-radius:10px;background:#ffffff;text-align:center;font-size:1rem}
.deadline-box{background:var(--brand-weak);border:1px dashed #bfdbfe;border-radius:12px;padding:10px;text-align:center;margin-top:8px}
.deadline-box .label{font-size:.78rem;color:#374151}
.deadline-box .value{font-size:1.03rem;font-weight:700}

/* === ì•„ì´ì½˜ì¹©(ì „ìš©ë©´ì /íŠ¹ë¡€) === */
#view-calc3 .area-options{display:flex;flex-direction:column;gap:9px;margin:6px 0 8px 0}
.icon-chip{display:inline-flex;align-items:center;gap:12px;padding:10px 12px;border-radius:12px;border:1px solid var(--line);white-space:nowrap;box-shadow:0 1px 2px var(--shadow)}
.icon-chip.sky{background:var(--sky);border-color:#bae6fd}
.icon-chip.yellow{background:var(--yellow);border-color:#fde68a}
.icon-chip label{display:inline-flex;align-items:center;gap:8px;margin:0}
.icon-chip .sep{opacity:.6}

/* === ìš”ì²­: ì²´í¬ë°•ìŠ¤+ë¬¸êµ¬ ê°•ì¡° === */
#view-calc3 .type-options label span,
#view-calc3 .area-options label span{color:#111827;font-size:1.1rem;font-weight:800}
#view-calc3 input[type="checkbox"]{width:18px;height:18px;accent-color:#111827}

/* PWA ëª¨ë“œì—ì„œ ì„¤ì¹˜ ë²„íŠ¼ ìˆ¨ê¹€ */
@media all and (display-mode: standalone), all and (display-mode: window-controls-overlay){ .btn-install{display:none !important} }
</style>
</head>
<body>
  <!-- ìŠ¤í”Œë˜ì‹œ: 1.5ì´ˆ í›„ ìë™ ì „í™˜ -->
  <div id="splash" role="status" aria-live="polite"><h1>ì·¨ë“ì„¸ ê³„ì‚°</h1></div>

  <!-- ë©”ë‰´ í™”ë©´ -->
  <div id="view-menu" class="view">
    <header class="appbar">
      <div class="row">
        <div class="brand"><span>ì·¨ë“ìœ í˜• ì„ íƒ</span></div>
        <div class="app-actions">
          <a class="icon-btn" target="_blank" href="https://www.law.go.kr/LSW/lsSc.do?query=%EC%A7%80%EB%B0%A9%EC%84%B8%EB%B2%95">ğŸ” ì§€ë°©ì„¸ë²•</a>
          <a class="icon-btn" target="_blank" href="https://www.wetax.go.kr/etq/etp/epi/E070101M01.do">ğŸ§¾ ìœ„íƒìŠ¤</a>
          <a class="icon-btn btn-install" href="javascript:void(0)" onclick="openInstall()" title="ì•± ì„¤ì¹˜" aria-label="ì•± ì„¤ì¹˜">ì•±ì„¤ì¹˜</a>
        </div>
      </div>
    </header>
    <div class="wrap">
      <div class="title">ì·¨ë“ìœ í˜• ì„ íƒ</div>
      <div class="menu-wrap">
        <div class="menu-grid" role="navigation" aria-label="ì·¨ë“ ìœ í˜• ì„ íƒ">
          <button class="menu-item" onclick="showView('coming1')">
            <div class="menu-num">1</div>
            <div>
              <div class="menu-text">ì£¼íƒ ë§¤ë§¤ ì·¨ë“</div>
              <div class="menu-note">ì¤€ë¹„ ì¤‘</div>
            </div>
          </button>
          <button class="menu-item ready" onclick="showView('calc2')">
            <div class="menu-num">2</div>
            <div>
              <div class="menu-text">ìƒê°€(ì˜¤í”¼ìŠ¤í…”) ë§¤ë§¤ ì·¨ë“</div>
            </div>
          </button>
          <button class="menu-item ready sky" onclick="showView('calc3')">
            <div class="menu-num">3</div>
            <div>
              <div class="menu-text">ìƒì† ì·¨ë“</div>
            </div>
          </button>
          <button class="menu-item" onclick="showView('coming4')">
            <div class="menu-num">4</div>
            <div>
              <div class="menu-text">ì¦ì—¬ ì·¨ë“</div>
              <div class="menu-note">ì¤€ë¹„ ì¤‘</div>
            </div>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- 1/4 ë²ˆ: ì¤€ë¹„ ì¤‘ í™”ë©´ë“¤ -->
  <div id="view-coming1" class="view hidden">
    <div class="wrap">
      <div class="card" style="text-align:center">
        <div class="title">ì£¼íƒ ë§¤ë§¤ ì·¨ë“</div>
        <p style="color:var(--text-sub)">ì´ ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.</p>
        <button class="btn" onclick="showView('menu')">â† ë©”ë‰´ë¡œ</button>
      </div>
    </div>
  </div>
  <div id="view-coming4" class="view hidden">
    <div class="wrap">
      <div class="card" style="text-align:center">
        <div class="title">ì¦ì—¬ ì·¨ë“</div>
        <p style="color:var(--text-sub)">ì´ ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.</p>
        <button class="btn" onclick="showView('menu')">â† ë©”ë‰´ë¡œ</button>
      </div>
    </div>
  </div>

  <!-- 2ë²ˆ: ìƒê°€(ì˜¤í”¼ìŠ¤í…”) ë§¤ë§¤ ì·¨ë“ ê³„ì‚°ê¸° -->
  <div id="view-calc2" class="view hidden" aria-labelledby="calc2-heading">
    <header class="appbar">
      <div class="row">
        <a class="icon-btn icon-only" href="javascript:void(0)" onclick="showView('menu')" title="ë’¤ë¡œ" aria-label="ë’¤ë¡œ">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path class="icon-stroke" d="M15 18l-6-6 6-6"/></svg>
        </a>
        <div class="brand"><span>2025ë…„ ì·¨ë“ì„¸ ê³„ì‚°(ìƒê°€ ë“± ìœ ìƒì·¨ë“)</span></div>
        <div class="app-actions">
          <a class="icon-btn" target="_blank" href="https://www.wetax.go.kr/tcp/loi/J030401M01.do" title="ì‹œê°€í‘œì¤€ì•¡ ì¡°íšŒ">ì‹œê°€í‘œì¤€ì•¡</a>
          <a class="icon-btn" target="_blank" href="https://www.realtyprice.kr/notice/main/mainBody.htm" title="ì£¼íƒê°€ê²© ì¡°íšŒ">ì£¼íƒê°€ê²©</a>
          <a class="icon-btn" target="_blank" href="https://www.law.go.kr/LSW/lsSc.do?query=%EC%A7%80%EB%B0%A9%EC%84%B8%EB%B2%95">ğŸ” ì§€ë°©ì„¸ë²•</a>
          <a class="icon-btn" target="_blank" href="https://www.wetax.go.kr/etq/etp/epi/E070101M01.do">ğŸ§¾ ìœ„íƒìŠ¤</a>
          <a class="icon-btn btn-install" href="javascript:void(0)" onclick="openInstall()" title="ì•± ì„¤ì¹˜" aria-label="ì•± ì„¤ì¹˜">ì•±ì„¤ì¹˜</a>
        </div>
      </div>
    </header>
    <div class="wrap">
      <h1 id="calc2-heading" class="title">2025ë…„ ì·¨ë“ì„¸ ê³„ì‚°(ìƒê°€ ë“± ìœ ìƒì·¨ë“)</h1>
      <div class="grid">
        <div class="card">
          <div class="header-row"><h2>1. ì·¨ë“ ì •ë³´ ì…ë ¥ <span class="unit">(ë‹¨ìœ„: ì›)</span></h2></div>
          <div class="input-grid">
            <div class="col col-amount">
              <label for="ì·¨ë“ê°€ì•¡">ì·¨ë“ê°€ì•¡(ë§¤ë§¤ê°€)</label>
              <input id="ì·¨ë“ê°€ì•¡" class="num" type="text" inputmode="numeric" placeholder="ìˆ«ìë§Œ ì…ë ¥" />
            </div>
            <div class="col col-date">
              <label for="ì”ê¸ˆì§€ê¸‰ì¼">ì”ê¸ˆì§€ê¸‰ì¼</label>
              <input id="ì”ê¸ˆì§€ê¸‰ì¼" type="date" class="date" />
            </div>
          </div>
          <div style="margin-top:14px;text-align:center"><button class="btn" onclick="calc2()">âœï¸ ê³„ì‚°í•˜ê¸°</button></div>
          <details class="center-30" style="margin-top:16px" open>
            <summary>ì„¸ìœ¨ ë° ê³¼ì„¸í‘œì¤€</summary>
            <table class="table nowrap">
              <tbody>
                <tr><td>ê³¼ì„¸í‘œì¤€</td><td id="ê³¼í‘œ">-</td></tr>
                <tr><td>ì·¨ë“ì„¸</td><td>4%</td></tr>
                <tr><td>ë†ì–´ì´ŒíŠ¹ë³„ì„¸</td><td>0.2%</td></tr>
                <tr><td>ì§€ë°©êµìœ¡ì„¸</td><td>0.4%</td></tr>
              </tbody>
            </table>
          <div class="deadline-box center-30" style="margin-top:10px">
            <div class="label">ì·¨ë“ì„¸ ë‚©ë¶€ê¸°í•œ</div>
            <div class="value" id="ë‚©ë¶€ê¸°í•œ">-</div>
          </div>
        </div>
        <div class="card">
          <h2>2. ì‚°ì¶œ ì„¸ì•¡</h2>
          <div class="sum-box" role="status" aria-live="polite">
            <div>
              <div class="label">ì´ í•©ê³„ ì„¸ì•¡</div>
              <div class="value" id="sum_total">-</div>
            </div>
            <div>
              <div class="label">ë‚©ë¶€ ì•ˆë‚´</div>
              <div class="value note nowrap" id="sum_guide">ì·¨ë“(ì”ê¸ˆì§€ê¸‰ì¼)ì¼ë¡œë¶€í„° 60ì¼ ë‚´</div>
            </div>
          </div>
          <table class="table">
            <thead><tr><th>ì„¸ëª©</th><th>ì„¸ìœ¨</th><th>ì„¸ì•¡</th></tr></thead>
            <tbody id="tb"><tr><td colspan="3" style="text-align:center;color:#6b7280">ì…ë ¥ í›„ â€˜ê³„ì‚°í•˜ê¸°â€™ë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”.</td></tr></tbody>
            <tfoot><tr><th>í•©ê³„ ì„¸ì•¡</th><th>4.6%</th><th id="sumY">-</th></tr></tfoot>
          </table>
          <div class="warn">â€» ì‹¤ì œ ê³ ì§€ì„œëŠ” ê°ë©´Â·ì¤‘ê³¼, ì ˆì‚¬ ë°©ì‹ ë“±ìœ¼ë¡œ ì°¨ì´ê°€ ìˆì„ ìˆ˜ ìˆìœ¼ë‹ˆ ìµœì¢… ê³ ì§€ì„œë¥¼ í™•ì¸í•˜ì„¸ìš”.</div>
        </div>
      </div>
    </div>
  </div>

  <!-- 3ë²ˆ: ìƒì† ì·¨ë“ ê³„ì‚°ê¸° -->
  <div id="view-calc3" class="view hidden" aria-labelledby="calc3-heading">
    <header class="appbar">
      <div class="row">
        <a class="icon-btn icon-only" href="javascript:void(0)" onclick="showView('menu')" title="ë’¤ë¡œ" aria-label="ë’¤ë¡œ">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path class="icon-stroke" d="M15 18l-6-6 6-6"/></svg>
        </a>
        <div class="brand"><span>2025ë…„ ì·¨ë“ì„¸ ê³„ì‚°(ìƒì† ì·¨ë“)</span></div>
        <div class="app-actions">
          <a class="icon-btn" target="_blank" href="https://www.wetax.go.kr/tcp/loi/J030401M01.do" title="ì‹œê°€í‘œì¤€ì•¡ ì¡°íšŒ">ì‹œê°€í‘œì¤€ì•¡</a>
          <a class="icon-btn" target="_blank" href="https://www.realtyprice.kr/notice/main/mainBody.htm" title="ì£¼íƒê°€ê²© ì¡°íšŒ">ì£¼íƒê°€ê²©</a>
          <a class="icon-btn" target="_blank" href="https://www.law.go.kr/LSW/lsSc.do?query=%EC%A7%80%EB%B0%A9%EC%84%B8%EB%B2%95">ğŸ” ì§€ë°©ì„¸ë²•</a>
          <a class="icon-btn" target="_blank" href="https://www.wetax.go.kr/etq/etp/epi/E070101M01.do">ğŸ§¾ ìœ„íƒìŠ¤</a>
          <a class="icon-btn btn-install" href="javascript:void(0)" onclick="openInstall()" title="ì•± ì„¤ì¹˜" aria-label="ì•± ì„¤ì¹˜">ì•±ì„¤ì¹˜</a>
        </div>
      </div>
    </header>
    <div class="wrap">
      <h1 id="calc3-heading" class="title">2025ë…„ ì·¨ë“ì„¸ ê³„ì‚°(ìƒì† ì·¨ë“)</h1>
      <div class="grid">
        <div class="card">
          <div class="header-row"><h2>1. ì·¨ë“ ì •ë³´ ì…ë ¥ <span class="unit">(ë‹¨ìœ„: ì›)</span></h2></div>

          <div class="type-options box" id="typeOptions" role="group" aria-label="ìƒì† ì·¨ë“ ìœ í˜• ì„ íƒ" style="background:var(--card);border:1px solid var(--line);border-radius:12px;padding:10px;display:flex;gap:14px;flex-wrap:wrap;">
            <label style="display:inline-flex;align-items:center;gap:6px"><input type="checkbox" id="isHouse"/> <span>1. ì£¼íƒ</span></label>
            <label style="display:inline-flex;align-items:center;gap:6px"><input type="checkbox" id="isNonHouse"/> <span>2. ì£¼íƒì´ ì•„ë‹Œ ë¶€ë™ì‚°</span></label>
          </div>

          <div id="areaOptions" class="area-options hidden" aria-live="polite">
            <!-- ì „ìš©ë©´ì  ì•„ì´ì½˜ì¹© (í•˜ëŠ˜ìƒ‰ ì˜…ì€ ë°°ê²½) -->
            <div class="icon-chip sky" id="areaBox" role="group" aria-label="ì „ìš©ë©´ì  ì„ íƒ">
              <label><input type="checkbox" id="area_le_85" /> <span>ì „ìš©ë©´ì  85mÂ² ì´í•˜</span></label>
              <span class="sep">|</span>
              <label><input type="checkbox" id="area_gt_85" /> <span>ì „ìš©ë©´ì  85mÂ² ì´ˆê³¼</span></label>
            </div>
            <!-- ì„¸ìœ¨ íŠ¹ë¡€ ì•„ì´ì½˜ë°•ìŠ¤ (ë…¸ë‘ ì˜…ì€ ë°°ê²½) -->
            <div class="icon-chip yellow" id="specialBox" role="group" aria-label="ì„¸ìœ¨ íŠ¹ë¡€ ì„ íƒ" title="ì²´í¬ ì‹œ ì·¨ë“ì„¸ìœ¨ 0.8% ì ìš© ë° ë†ì–´ì´ŒíŠ¹ë³„ì„¸ ë¯¸ë¶€ê³¼">
              <label>
                <input type="checkbox" id="one_home_special" />
                <span>1ê°€êµ¬1ì£¼íƒ ì„¸ìœ¨íŠ¹ë¡€ëŒ€ìƒ(íŒë‹¨ìˆœì„œ â‘ ì§€ë¶„ì´ ê°€ì¥ í° ì â‘¡ìƒì†ì£¼íƒ ê±°ì£¼ì â‘¢ì—°ì¥ì)</span>
              </label>
            </div>
          </div>

          <div class="input-grid">
            <div class="col col-amount">
              <label for="ìƒì†_ê³¼ì„¸í‘œì¤€">ê³¼ì„¸í‘œì¤€(ì£¼íƒê³µì‹œê°€ê²© ë˜ëŠ” ê±´ë¬¼Â·í† ì§€ ì‹œê°€í‘œì¤€ì•¡)</label>
              <input id="ìƒì†_ê³¼ì„¸í‘œì¤€" class="num" type="text" inputmode="numeric" placeholder="ìˆ«ìë§Œ ì…ë ¥" />
            </div>
            <div class="col col-date">
              <label for="ì‚¬ë§ì¼">ì‚¬ë§ì¼(ìƒì†ê°œì‹œì¼)</label>
              <input id="ì‚¬ë§ì¼" type="date" class="date" />
            </div>
          </div>
          <div style="margin-top:14px;text-align:center"><button class="btn" onclick="calc3()">âœï¸ ê³„ì‚°í•˜ê¸°</button></div>
          <details class="center-30" style="margin-top:16px" open>
            <summary>ì„¸ìœ¨ ë° ê³¼ì„¸í‘œì¤€</summary>
            <table class="table nowrap">
              <tbody>
                <tr><td>ê³¼ì„¸í‘œì¤€</td><td id="ìƒì†_ê³¼í‘œ">-</td></tr>
                <tr><td>ì·¨ë“ì„¸</td><td id="ìƒì†_ì·¨ë“ì„¸ìœ¨ì…€">2.8%</td></tr>
                <tr><td>ë†ì–´ì´ŒíŠ¹ë³„ì„¸</td><td id="ìƒì†_ë†íŠ¹ì„¸ìœ¨ì…€">0.2%</td></tr>
                <tr><td>ì§€ë°©êµìœ¡ì„¸</td><td>0.16%</td></tr>
              </tbody>
            </table>
            <div class="deadline-box center-30" style="margin-top:10px">
              <div class="label">ì·¨ë“ì„¸ ë‚©ë¶€ê¸°í•œ</div>
              <div class="value" id="ìƒì†_ë‚©ë¶€ê¸°í•œ">-</div>
            </div>
          </details>
        </div>
        <div class="card">
          <h2>2. ì‚°ì¶œ ì„¸ì•¡</h2>
          <div class="sum-box" role="status" aria-live="polite">
            <div>
              <div class="label">ì´ í•©ê³„ ì„¸ì•¡</div>
              <div class="value" id="ìƒì†_sum_total">-</div>
            </div>
            <div>
              <div class="label">ë‚©ë¶€ ì•ˆë‚´</div>
              <div class="value note nowrap" id="ìƒì†_sum_guide">ì‚¬ë§ì¼(ìƒì†ê°œì‹œì¼)ë¡œë¶€í„° 6ê°œì›” ë‚´</div>
            </div>
          </div>
          <table class="table">
            <thead><tr><th>ì„¸ëª©</th><th>ì„¸ìœ¨</th><th>ì„¸ì•¡</th></tr></thead>
            <tbody id="ìƒì†_tb"><tr><td colspan="3" style="text-align:center;color:#6b7280">ì…ë ¥ í›„ â€˜ê³„ì‚°í•˜ê¸°â€™ë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”.</td></tr></tbody>
            <tfoot><tr><th>í•©ê³„ ì„¸ì•¡</th><th id="ìƒì†_í•©ê³„ì„¸ìœ¨í‘œì‹œ">3.16%</th><th id="ìƒì†_sumY">-</th></tr></tfoot>
          </table>
          <div class="warn">â€» ì‹¤ì œ ê³ ì§€ì„œëŠ” ê°ë©´Â·ì¤‘ê³¼, ì ˆì‚¬ ë°©ì‹ ë“±ìœ¼ë¡œ ì°¨ì´ê°€ ìˆì„ ìˆ˜ ìˆìœ¼ë‹ˆ ìµœì¢… ê³ ì§€ì„œë¥¼ í™•ì¸í•˜ì„¸ìš”.</div>
        </div>
      </div>
    </div>
  </div>

  <!-- ====== í•œí˜ì´ì§€ ë¯¸ë¦¬ë³´ê¸° ì˜¤ë²„ë ˆì´ (ë‹«ê¸° ë²„íŠ¼ ì—†ìŒ) ====== -->
  <div id="previewOverlay" role="dialog" aria-modal="true" aria-label="í•œí˜ì´ì§€ ë¯¸ë¦¬ë³´ê¸°">
    <div class="preview-card">
      <div class="preview-toolbar">
        <div class="left"><strong>í•œí˜ì´ì§€ ë¯¸ë¦¬ë³´ê¸°</strong></div>
        <div class="right"><!-- ë‹«ê¸° ë²„íŠ¼ ì—†ìŒ --></div>
      </div>
      <div class="preview-page-wrap">
        <div class="preview-page" id="previewPage">
          <div class="preview-content" id="previewContent"></div>
        </div>
      </div>
    </div>
  </div>

<script>
// --- ë·° ì „í™˜ & ìŠ¤í”Œë˜ì‹œ + ë’¤ë¡œê°€ê¸° íˆìŠ¤í† ë¦¬ ì²˜ë¦¬ ---
function showView(name, push = true){
  document.querySelectorAll('.view').forEach(v=>v.classList.add('hidden'));
  const el=document.getElementById('view-'+name);
  if(el){ el.classList.remove('hidden'); window.scrollTo(0,0);
    if(push){ try{ history.pushState({view:name}, '', '#'+name); }catch(e){} }
  }
}
window.addEventListener('popstate', (event)=>{
  const view = (event.state && event.state.view) || (location.hash ? location.hash.replace('#','') : 'menu');
  showView(view, false);
});
window.addEventListener('load',()=>{
  setTimeout(()=>{
    const sp=document.getElementById('splash'); if(sp) sp.classList.add('hidden');
    const initial = location.hash ? location.hash.replace('#','') : 'menu';
    showView(initial, false);
    try{ history.replaceState({view:initial}, '', '#'+initial); }catch(e){}
  },1500);
});
</script>

<script>
// --- ê³µí†µ ìœ í‹¸ & í¬ë§¤í„° ---
const $=id=>document.getElementById(id);
const setText=(id,v)=>{const el=$(id);if(el)el.textContent=v;}
const setHTML=(id,v)=>{const el=$(id);if(el)el.innerHTML=v;}
const numOf=id=>Number((($(id)?.value)||'').replace(/,/g,'')||0);
const floor10=n=>Math.floor(n/10)*10; // 10ì› ì ˆì‚¬
const fmt=n=>(Number.isFinite(n)?Math.floor(n).toLocaleString('ko-KR')+'ì›':'-');

// ë‚ ì§œ ìœ í‹¸
const parseLocalDate=s=>{ if(!s) return null; const [y,m,d]=s.split('-').map(Number); return new Date(y, (m||1)-1, d||1); };
const addDays=(date,days)=>{ const d=new Date(date.getFullYear(), date.getMonth(), date.getDate()+days); return d; };
const addMonths=(date,months)=>{ const d=new Date(date.getFullYear(), date.getMonth(), date.getDate()); d.setMonth(d.getMonth()+months); if(d.getDate()!==date.getDate()){ d.setDate(0); } return d; };
const formatYMD=d=>{ if(!d||Number.isNaN(+d)) return '-'; const y=d.getFullYear(); const m=String(d.getMonth()+1).padStart(2,'0'); const dd=String(d.getDate()).padStart(2,'0'); return `${y}-${m}-${dd}`; };

document.addEventListener('input',e=>{if(e.target.classList.contains('num')){let v=e.target.value.replace(/,/g,'').replace(/[^\d]/g,'');if(v===''){e.target.value='';return;}e.target.value=v.replace(/\B(?=(\d{3})+(?!\d))/g,",");}});
</script>

<script>
// --- (2ë²ˆ) ìƒê°€ ë“± ìœ ìƒì·¨ë“ ê³„ì‚°ê¸° ---
const ACQ_RATE=0.04, NTS_RATE=0.002, EDU_RATE=0.004, TOTAL_RATE=ACQ_RATE+NTS_RATE+EDU_RATE;
function calc2(){
  const base=numOf('ì·¨ë“ê°€ì•¡');
  const acq=floor10(base*ACQ_RATE), nts=floor10(base*NTS_RATE), edu=floor10(base*EDU_RATE);
  const sum=acq+nts+edu;
  const rows=[["ì·¨ë“ì„¸","4%",fmt(acq)],["ë†ì–´ì´ŒíŠ¹ë³„ì„¸","0.2%",fmt(nts)],["ì§€ë°©êµìœ¡ì„¸","0.4%",fmt(edu)]].map(([n,r,a])=>`<tr><td>${n}</td><td>${r}</td><td>${a}</td></tr>`).join('');
  setHTML('tb',rows); setText('sumY',fmt(sum)); setText('sum_total',fmt(sum)); setText('ê³¼í‘œ',fmt(base));
  setText('sum_guide','ì·¨ë“(ì”ê¸ˆì§€ê¸‰ì¼)ì¼ë¡œë¶€í„° 60ì¼ ë‚´');

  const payDateStr = $('ì”ê¸ˆì§€ê¸‰ì¼')?.value || '';
  let deadline='-';
  if(payDateStr){ const d=parseLocalDate(payDateStr); if(d){ deadline = formatYMD(addDays(d,60)); } }
  setText('ë‚©ë¶€ê¸°í•œ', deadline);
}
document.addEventListener('change',e=>{ if(e.target && (e.target.id==='ì”ê¸ˆì§€ê¸‰ì¼')){ calc2(); }});
</script>

<script>
// --- (3ë²ˆ) ìƒì† ì·¨ë“ ê³„ì‚°ê¸° ---
const I_ACQ_RATE_DEFAULT=0.028, I_ACQ_RATE_SPECIAL=0.008; // íŠ¹ë¡€ 0.8%
const I_NTS_RATE=0.002, I_EDU_RATE=0.0016;

function enforceTypeExclusive(changedId){
  const a=$('isHouse'), b=$('isNonHouse');
  if(changedId==='isHouse' && a?.checked){ if(b) b.checked=false; }
  if(changedId==='isNonHouse' && b?.checked){ if(a) a.checked=false; }
}
function refreshAreaOptions(){
  const isHouse = $('isHouse')?.checked;
  const isNonHouse = $('isNonHouse')?.checked;
  if(isHouse && isNonHouse){ $('isNonHouse').checked=false; }
  const showArea = !!$('isHouse')?.checked && !$('isNonHouse')?.checked;
  const areaBox = $('areaOptions');
  if(areaBox){ areaBox.classList.toggle('hidden', !showArea); }
  if(!showArea){
    const le = $('area_le_85'), gt = $('area_gt_85'), sp=$('one_home_special');
    if(le) le.checked=false; if(gt) gt.checked=false; if(sp) sp.checked=false;
  }
}
function toggleArea(exclusiveId){
  const ids = ['area_le_85','area_gt_85'];
  ids.forEach(id=>{ if(id!==exclusiveId){ const el=$(id); if(el) el.checked=false; } });
  if(exclusiveId==='area_le_85'){ const sp=$('one_home_special'); if(sp) sp.checked=false; }
}
function calc3(){
  const base=numOf('ìƒì†_ê³¼ì„¸í‘œì¤€');
  const isHouse = $('isHouse')?.checked || false;
  const isNonHouse = $('isNonHouse')?.checked || false;
  const le85 = $('area_le_85')?.checked || false;
  const gt85 = $('area_gt_85')?.checked || false;
  const special = $('one_home_special')?.checked || false;

  // --- ë†íŠ¹ì„¸ ê³„ì‚° ---
  let ntsRate = I_NTS_RATE;
  let ntsRateLabel = '0.2%';
  if(isHouse && !isNonHouse){
    if(le85){ ntsRate = 0; ntsRateLabel = 'ë¯¸ë¶€ê³¼'; }
  }
  if(special){ ntsRate = 0; ntsRateLabel = 'ë¯¸ë¶€ê³¼'; }

  // --- ì·¨ë“ì„¸ìœ¨ ê³„ì‚°: íŠ¹ë¡€ ì²´í¬ ì‹œ ë¬´ì¡°ê±´ 0.8% ---
  let acqRate = I_ACQ_RATE_DEFAULT;
  if(special){ acqRate = I_ACQ_RATE_SPECIAL; }
  const acqRateLabel = (acqRate*100).toFixed(1) + '%';

  // ì‚°ì¶œ
  const acq=floor10(base*acqRate);
  const nts=floor10(base*ntsRate);
  const edu=floor10(base*I_EDU_RATE);
  const sum=acq+nts+edu;

  const rows=[["ì·¨ë“ì„¸",acqRateLabel,fmt(acq)],["ë†ì–´ì´ŒíŠ¹ë³„ì„¸",ntsRateLabel,fmt(nts)],["ì§€ë°©êµìœ¡ì„¸","0.16%",fmt(edu)]].map(([n,r,a])=>`<tr><td>${n}</td><td>${r}</td><td>${a}</td></tr>`).join('');
  setHTML('ìƒì†_tb',rows);
  setText('ìƒì†_sumY',fmt(sum));
  setText('ìƒì†_sum_total',fmt(sum));
  setText('ìƒì†_ê³¼í‘œ',fmt(base));
  setText('ìƒì†_ë†íŠ¹ì„¸ìœ¨ì…€', ntsRateLabel);
  setText('ìƒì†_ì·¨ë“ì„¸ìœ¨ì…€', acqRateLabel);
  const totalRatePct = ((acqRate + ntsRate + I_EDU_RATE)*100).toFixed(2) + '%';
  setText('ìƒì†_í•©ê³„ì„¸ìœ¨í‘œì‹œ', totalRatePct);

  setText('ìƒì†_sum_guide','ì‚¬ë§ì¼(ìƒì†ê°œì‹œì¼)ë¡œë¶€í„° 6ê°œì›” ë‚´');
  const deathStr = $('ì‚¬ë§ì¼')?.value || '';
  let deadline='-';
  if(deathStr){ const d=parseLocalDate(deathStr); if(d){ deadline = formatYMD(addMonths(d,6)); } }
  setText('ìƒì†_ë‚©ë¶€ê¸°í•œ', deadline);
}

document.addEventListener('change',e=>{
  const id = e.target?.id || '';
  if(id==='ì‚¬ë§ì¼'){ calc3(); }
  if(id==='isHouse' || id==='isNonHouse'){
    enforceTypeExclusive(id); refreshAreaOptions(); calc3();
  }
  if(id==='area_le_85'){ if(e.target.checked) toggleArea('area_le_85'); calc3(); }
  if(id==='area_gt_85'){ if(e.target.checked) toggleArea('area_gt_85'); calc3(); }
  if(id==='one_home_special'){ calc3(); }
});

document.addEventListener('DOMContentLoaded', ()=>{ refreshAreaOptions(); });
</script>

<script>
// --- PWA ì„¤ì¹˜ ë¡œì§ ---
let deferredPrompt=null;
function isStandalone(){
  try{
    return window.matchMedia('(display-mode: standalone)').matches
      || window.matchMedia('(display-mode: window-controls-overlay)').matches
      || window.navigator.standalone === true;
  }catch(e){ return false; }
}
function setInstallButtonsVisible(visible){
  document.querySelectorAll('.btn-install').forEach(el=>{ el.style.display = visible ? '' : 'none'; });
  document.body.classList.toggle('installed', !visible);
}
function updateInstallUI(){ const installed = isStandalone(); setInstallButtonsVisible(!installed); }
const isiOS = /iPad|iPhone|iPod/i.test(navigator.userAgent);
const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);
window.addEventListener('beforeinstallprompt',(e)=>{ e.preventDefault(); deferredPrompt=e; updateInstallUI(); });
window.addEventListener('appinstalled', ()=>{ deferredPrompt=null; setInstallButtonsVisible(false); setTimeout(()=>{ try{ location.reload(); }catch(e){} }, 300); });
async function openInstall(){
  try{
    if(isStandalone()){ setInstallButtonsVisible(false); return; }
    if(deferredPrompt){ deferredPrompt.prompt(); const choice = await deferredPrompt.userChoice.catch(()=>null); deferredPrompt=null; if(!choice || choice.outcome!=='accepted'){ updateInstallUI(); } return; }
    if(isiOS && isSafari){ alert('iOS ì‚¬íŒŒë¦¬: ê³µìœ (â¬†ï¸) ë²„íŠ¼ â†’ "í™ˆ í™”ë©´ì— ì¶”ê°€"ë¥¼ ëˆŒëŸ¬ ì„¤ì¹˜í•˜ì„¸ìš”.'); }
    else{ alert('ë¸Œë¼ìš°ì € ë©”ë‰´ì—ì„œ "ì•± ì„¤ì¹˜" ë˜ëŠ” ì£¼ì†Œì°½ ìš°ì¸¡ ì„¤ì¹˜ ì•„ì´ì½˜ì„ ëˆŒëŸ¬ ì„¤ì¹˜í•˜ì„¸ìš”.'); }
  }catch(e){ console.error(e); }
}
['load','pageshow','visibilitychange'].forEach(evt=>{ window.addEventListener(evt, updateInstallUI); });
try{ window.matchMedia('(display-mode: standalone)').addEventListener('change', updateInstallUI); }catch(e){}
</script>

<script>
// ===== í•œí˜ì´ì§€ ë¯¸ë¦¬ë³´ê¸° ë¡œì§ (ë‹«ê¸° ë²„íŠ¼ ì—†ìŒ) =====
function getActiveView(){
  const v = Array.from(document.querySelectorAll('.view')).find(el=>!el.classList.contains('hidden'));
  return v || document.getElementById('view-menu');
}
function openOnePagePreview(){
  try{ calc2(); }catch(e){}
  try{ calc3(); }catch(e){}
  const overlay = document.getElementById('previewOverlay');
  const page = document.getElementById('previewPage');
  const content = document.getElementById('previewContent');
  if(!overlay||!page||!content) return;
  const active = getActiveView();
  const clone = active.cloneNode(true);
  clone.setAttribute('data-preview','1');
  const holder = document.createElement('div');
  holder.className = 'preview-scale';
  holder.appendChild(clone);
  content.innerHTML='';
  content.appendChild(holder);
  overlay.classList.add('show');
  requestAnimationFrame(()=>{
    const targetW = page.clientWidth - 24, targetH = page.clientHeight - 24;
    holder.style.transform = 'scale(1)';
    const naturalW = holder.scrollWidth || holder.offsetWidth || targetW;
    const naturalH = holder.scrollHeight || holder.offsetHeight || targetH;
    const scale = Math.min(targetW/naturalW, targetH/naturalH, 1);
    holder.style.transform = `scale(${scale})`;
  });
}
</script>
</body>
</html>
.
